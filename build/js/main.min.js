"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var ready=function(){"undefined"!=typeof autosize&&autosize(document.querySelectorAll("textarea")),paintRating(),document.querySelector("[data-accordion]")&&accordion.init(),document.querySelector("[data-message]")&&message.init();[].concat(_toConsumableArray(document.querySelectorAll("[data-tabs-title]"))).forEach(function(e){return tabControl.init(e)})};document.addEventListener("DOMContentLoaded",ready);var accordion={init:function(){[].concat(_toConsumableArray(document.querySelectorAll("[data-accordion]"))).forEach(function(e){e.querySelector(".accordion-title").addEventListener("click",function(){return accordion.toggle(e)})})},toggle:function(e){e.classList.toggle("_is-open");var t=e.querySelector(".accordion-content");t.hidden=!t.hidden;var o=e.querySelector(".accordion-title");o.dataset.show&&(o.innerHTML=e.classList.contains("_is-open")?o.dataset.hide:o.dataset.show)},close:function(e){e.classList.remove("_is-open"),e.querySelector(".accordion-content").hidden=!0;var t=e.querySelector(".accordion-title");t.dataset.show&&(t.innerHTML=t.dataset.hide)}},message={init:function(){[].concat(_toConsumableArray(document.querySelectorAll("[data-message]"))).forEach(function(e){e.addEventListener("click",function(){return message.toggle(e)})})},toggle:function(e){e.classList.toggle("_is-minimized");var t=e.querySelector("time"),o=t.dateTime.split(/[- :]/).map(function(e){return parseInt(e,10)}),n=new Date(o[0],o[1]-1,o[2],o[3],o[4]);e.classList.contains("_is-minimized")?t.innerHTML=n.toLocaleString("ru-RU",{month:"short",day:"numeric"}):t.innerHTML=n.toLocaleString("ru-RU",{weekday:"long",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}},paintRating=function(){[].concat(_toConsumableArray(document.querySelectorAll(".rating[data-value]"))).forEach(function(e){e.style.width=15*e.dataset.max+"px",e.childNodes[0].style.width=e.dataset.value/e.dataset.max*100+"%"})},tabControl={init:function(e){[].concat(_toConsumableArray(e.querySelectorAll("[data-tab]"))).forEach(function(t){t.addEventListener("click",function(){return tabControl.switch(t,e)})})},switch:function(e,t){var o="_is-active";if(!e.classList.contains(o)){var n=t.dataset.tabsTitle,a=document.querySelector("[data-tabs-content="+n+"]"),r=t.querySelector("."+o);r.classList.remove(o),e.classList.add(o),a.querySelector('[data-tab="'+r.dataset.tab+'"]').hidden=!0,a.querySelector('[data-tab="'+e.dataset.tab+'"]').hidden=!1}}},filePreview={show:function(e){var t=e.target,o=t.files[0],n=new FileReader;n.onload=function(e){t.nextElementSibling.style.backgroundImage="url("+e.target.result+")",t.classList.add("_is-chosen")},n.readAsDataURL(o)},remove:function(e){var t=document.getElementById(e);t.value="",t.classList.remove("_is-chosen"),t.nextElementSibling.style.backgroundImage="none"}},modal={open:function(e){event.preventDefault();var t=document.querySelector(e);t.classList.add("_is-active");var o=t.querySelector(".modal__overlay"),n=t.querySelector(".modal__close");o.onclick=n.onclick=function(){return modal.close(e)},document.body.classList.add("_is-fixed")},close:function(e){document.querySelector(e).classList.remove("_is-active"),document.body.classList.remove("_is-fixed")}},operatingTime={save:function(){var e=document.querySelector(".operating-time-wrapper");if(e){var t=void 0;if(e.hasChildNodes())t=e.querySelector(".registration__operating-time");else{var o=document.getElementById("operating-time-template").content.querySelector(".registration__operating-time");t=o.cloneNode(!0)}var n=document.getElementById("operating-time"),a=[].concat(_toConsumableArray(n.querySelectorAll("input"))),r=[].concat(_toConsumableArray(t.querySelectorAll("th")));if(a.forEach(function(e){var o=t.querySelector('[data-id="'+e.dataset.id+'"]'),n=e.value.trim();o.innerHTML=n;var a=e.dataset.id.substr(e.dataset.id.length-1);n?(o.parentNode.classList.remove("_is-empty"),r[a-1].classList.remove("day-off")):(o.parentNode.classList.add("_is-empty"),e.dataset.id.includes("work")&&r[a-1].classList.add("day-off"))}),!e.hasChildNodes()){e.appendChild(t);document.getElementById("set-operating-time").remove();var i=document.getElementById("edit-operating-time").content.querySelector("button").cloneNode(!0);e.appendChild(i)}modal.close("#operating-time")}}},registrationDelivery={toggle:function(){var e=document.querySelector(".registration-delivery-wrapper");e.hasChildNodes()?registrationDelivery.clear(e):registrationDelivery.enable(e)},clear:function(e){e.innerHTML=""},enable:function(e){var t=document.getElementById("registration-delivery-template").content.querySelector("div").cloneNode(!0);e.appendChild(t),this.addItem()},addItem:function(){var e=document.querySelector(".registration-delivery-wrapper"),t=document.getElementById("delivery-item-template").content.querySelector("div").cloneNode(!0),o=e.querySelector(".registration__add-delivery");o.parentNode.insertBefore(t,o)}},checkForm=function(e){var t=!0;[].concat(_toConsumableArray(e.querySelectorAll("[required]"))).forEach(function(e){e.checkValidity()||(t=!1)});var o=!e.querySelector(".form__error");e.querySelector('[type="submit"]').disabled=!t||!o},sidePanel={toggle:function(){var e=[].concat(_toConsumableArray(document.querySelectorAll(".grid__column_side-panel")));e.forEach(function(e){e.classList.toggle("_is-minimized")}),e[0].classList.contains("_is-minimized")&&sidePanel.closeAccordion()},closeAccordion:function(){var e=document.querySelector(".side-panel__item._is-open");e&&accordion.close(e)}},categories={open:function(e){event.currentTarget.disabled=!0,document.querySelector(e).classList.add("categories__list_full")}},showMore={toggle:function(e){var t=document.querySelector(e),o=event.currentTarget;o.innerHTML=t.classList.contains("_is-expanded")?o.dataset.showMore:o.dataset.showLess,t.classList.toggle("_is-expanded")}},layoutView={toggle:function(e){event.currentTarget.classList.contains("_is-active")||(document.querySelector(".layout-view__layout-type_list").classList.toggle("_is-active"),document.querySelector(".layout-view__layout-type_grid").classList.toggle("_is-active"),document.querySelector(e).classList.toggle("_list-view"))}};